{% if versions %}
<div class="version-selector" role="navigation" aria-label="Version selector">
    <style>
        .version-selector {
            padding: 1rem;
            margin-bottom: 1rem;
            background: var(--color-sidebar-background, #f8f9fa);
            border-radius: 0.5rem;
            border: 1px solid var(--color-sidebar-background-border, #e9ecef);
        }
        .version-selector h3 {
            margin: 0 0 0.75rem 0;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-sidebar-link-text, #1a1a1a);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .version-selector .version-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .version-selector .version-list li {
            margin: 0.25rem 0;
        }
        .version-selector .version-list a {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.75rem;
            color: var(--color-sidebar-link-text, #1a1a1a);
            text-decoration: none;
            border-radius: 0.375rem;
            transition: background-color 0.15s ease;
            font-size: 0.875rem;
        }
        .version-selector .version-list a:hover {
            background-color: var(--color-sidebar-item-background--hover, #e9ecef);
        }
        .version-selector .version-list a.current {
            background-color: var(--color-brand-primary, #4CAF50);
            color: white;
            font-weight: 600;
        }
        .version-selector .version-badge {
            margin-left: auto;
            padding: 0.125rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 0.25rem;
            font-weight: 500;
        }
        .version-selector .badge-stable {
            background-color: #28a745;
            color: white;
        }
        .version-selector .badge-dev {
            background-color: #2196F3;
            color: white;
        }
        .version-selector .badge-beta {
            background-color: #FF9800;
            color: white;
        }
        .version-selector .version-group {
            margin-bottom: 1rem;
        }
        .version-selector .version-group:last-child {
            margin-bottom: 0;
        }
        .version-selector .version-group-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-sidebar-caption-text, #6c757d);
            margin: 0.5rem 0 0.25rem 0;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
    </style>

    <h3>üìö Documentation Versions</h3>

    {% set branches = [] %}
    {% set tags = [] %}
    {% for item in versions %}
        {% if item.name in ['main', 'dev'] %}
            {% set _ = branches.append(item) %}
        {% else %}
            {% set _ = tags.append(item) %}
        {% endif %}
    {% endfor %}

    {% if branches %}
    <div class="version-group">
        <div class="version-group-title">Branches</div>
        <ul class="version-list">
        {% for item in branches %}
            <li>
                <a href="{{ item.url }}" rel="nofollow" {% if item.name == current_version %}class="current"{% endif %}>
                    <span>
                        {% if item.name == 'main' %}
                            üìò Main
                        {% elif item.name == 'dev' %}
                            üöß Dev
                        {% else %}
                            {{ item.name }}
                        {% endif %}
                    </span>
                    {% if item.name == current_version %}
                        <span class="version-badge badge-stable">Current</span>
                    {% elif item.name == 'main' %}
                        <span class="version-badge badge-stable">Stable</span>
                    {% elif item.name == 'dev' %}
                        <span class="version-badge badge-dev">Latest</span>
                    {% endif %}
                </a>
            </li>
        {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if tags %}
    <div class="version-group">
        <div class="version-group-title">Tagged Releases</div>
        <ul class="version-list">
        {% for item in tags[:10] %}
            <li>
                <a href="{{ item.url }}" rel="nofollow" {% if item.name == current_version %}class="current"{% endif %}>
                    <span>üè∑Ô∏è {{ item.name }}</span>
                    {% if '-beta' in item.name %}
                        <span class="version-badge badge-beta">Beta</span>
                    {% endif %}
                    {% if item.name == current_version %}
                        <span class="version-badge badge-stable">Current</span>
                    {% endif %}
                </a>
            </li>
        {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>
{% endif %}
